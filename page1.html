<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Propellers</title>
    <link rel="shortcut icon" href="images/p alphabet.webp" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        main{
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center; 
            justify-content: center;
        }
        .container {
            background-color: blue;
            margin: auto;
            padding: 20px;
            width: 40%;
            height: auto;
            box-shadow: 10px 10px 5px rgba(0, 0, 0, 0.7);
            border-radius: 10px;
        }
        h1 {
            color: darkred;
            text-align: center;
        }

        form {
            margin: auto;
            width: 80%;
            text-align: center;
            h2{
            color: white;
            text-align: left;
            font-size: 18px;
        }
        }
        form input {
            width: 100%;
            padding: 15px;
            margin: 20px auto;
            margin-bottom: -2px;
            border-radius: 5px;
            border: 2px solid darkred;
            box-sizing: border-box;
        }
        form button {
            width: 100%;
            padding: 10px;
            margin: 20px auto;
            border-radius: 5px;
            color: white;
            background-color: green;
            font-size: 18px;
            opacity: 0.8;
            pointer-events: none;
        }
        form button:active {
            background-color: darkred;
        }
        input:valid ~ button{
            opacity: 1;
            pointer-events: auto;
            cursor: pointer;
        }

        /* Mobile Large Screen */
        @media (max-width: 720px) {
            .container {
            background-color: blue;
            margin: auto;
            padding: 20px;
            width: 70%;
            height: auto;
            box-shadow: 10px 10px 5px rgba(0, 0, 0, 0.7);
            border-radius: 10px;
        }
        }

        /*Mobile Screen*/
        @media (max-width: 580px) {
            .container {
            background-color: blue;
            margin: auto;
            padding: 20px;
            width: 100%;
            height: auto;
            box-shadow: 10px 10px 5px rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <button id="openButton" onclick="togglemenu()">
            <span></span>
            <span></span>
            <span></span>   
        </button>

        <div id="sidebar">
            <button id="closeButton" onclick="togglemenu()">X</button>

        <ul>
            <li><a href="index.html"><i class="fas fa-download"></i> Video</i></a></li>
            <li><a href="page1.html"><i class="fas fa-download"></i> Files</a></li>
            <li><a href="#"><i class="fas fa-info-circle"></i> About Us</a></li>
            <li><a href="#"><i class="fas fa-shield-alt"></i> Privacy</a></li>
            <li><a href="page4.html"><i class="fas fa-comment-alt"></i> Feedback</a></li>
        </ul>
        </div>
    </header>

    <main>
    <div class="container">
        <h1>Propellers</h1>

        <form id="downloaderForm">
            <h2>The Files Downloader:</h2>
            <input type="url" name="fileInput" placeholder="Paste File URL..." id="fileInput" required>
            <br>
            <button type="button" id="downloadButton">Download File</button>
        </form>
        
    </div>
    </main>

    <script>
        const fileInput = document.getElementById("fileInput");
const downloadBtn = document.getElementById("downloadButton");

downloadBtn.addEventListener("click", (e) => {
    e.preventDefault();
    const fileUrl = fileInput.value.trim(); // Get the input value and trim whitespace
    if (fileUrl) {
        downloadBtn.innerText = "Downloading File...";
        fetchFile(fileUrl);
    } else {
        alert("Please enter a valid URL.");
    }
});

function fetchFile(url) {
    fetch(url)
        .then((res) => {
            if (!res.ok) {
                throw new Error(`HTTP error! status: ${res.status}`);
            }
            return res.blob();
        })
        .then((file) => {
            let tempUrl = URL.createObjectURL(file); // Pass the blob to createObjectURL
            let aTag = document.createElement("a");
            aTag.href = tempUrl;
            aTag.download = url.split("/").pop(); // Extract file name from URL
            document.body.appendChild(aTag);
            aTag.click();
            aTag.remove();
            URL.revokeObjectURL(tempUrl); // Revoke the temporary URL
            downloadBtn.innerText = "Download File"; // Reset button text
        })
        .catch(() => {
            downloadBtn.innerText = "Download File";
            alert("Failed to Download File!");
        });
}

    </script>

    <script src="script.js"></script>
</body>
</html>
